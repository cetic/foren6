<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Foren6: A 6LoWPAN Diagnosis Tool</title>
    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-45242872-2', 'cetic.github.io');
      ga('send', 'pageview');
    </script>
    <div class="wrapper">

      <header>
        <a href="index.html"><img id="logo" src="images/foren6-400p-alpha.png"/></a>
        <p class="view"><a href="https://github.com/cetic/foren6">View the Project on GitHub <small>cetic/foren6</small></a></p>


        <ul id="ghbuttons">
          <li><a href="https://github.com/cetic/foren6/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/cetic/foren6/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/cetic/foren6">View On <strong>GitHub</strong></a></li>
        </ul>
        <ul id="foren6links">
          <li><a href="./index.html">Home</a></li>
<li><a href="./install.html">Installation Notes</a></li>
<li><a href="./guide.html">User Manual</a></li>
<li><a href="./getting-started.html">Walkthrough</a></li>
<li><a href="./credits.html">Credits</a></li>

        </ul>
      </header>
      
      
      <section class="justified centered">
        <center>
        <h1>Example 3: Analysing a real network with a sniffer</h1>
        </center>
          	<p><a href="getting-started.html"><strong>Back to examples index</strong></a></p>

	<h2>Introduction</h2>

	<p>In this example, we will cover the basic steps to analyse a real 6LoWPAN network using a Contiki-based sniffer module.</p>

	<h2>Configuring the sniffer</h2>

	<h3>Getting the hardware</h3>

	<p>To begin, you need a Contiki-compatible platform with an 802.15.4 radio and a <span class="caps">USB</span> connector. At the time of this writing, Contiki doesn&#8217;t provide a standard & generic sniffer module allowing to configure the 802.15.4 channel, so we base our sniffers on an existing Contiki application provided by <a href="http://rtn.sssup.it/index.php/software/seed-eye-apps/sniffer-154">the Sniffer 15.4 project</a>. Although any Contiki-compatible module should work, we have limited our tests to the following platforms: TelosB, CM5000, Z1, Econotag.</p>

	<h3 id="PERMISSIONS">Setting user permissions</h3>

	<p>On Linux, you should configure permissions for the user to access the <span class="caps">USB</span> serial devices &#8211; it is much better practice then launching Foren6 as root. To grant access to a user account, add that user to the 'dialout&#8217; group:</p>

<pre>sudo adduser &#60;username&#62; dialout</pre>

	<p>Then, restart your session to apply the modifications.</p>

	<h3>Programming the sniffer</h3>

	<p>The sniffer application is available on <a href="https://github.com/cetic/contiki/tree/sniffer/examples/sniffer">the sniffer branch of our Contiki fork</a>.<br />To program a Contiki-compatible mote as a 802.15.4:</p>

	<p>Make sure you have a proper toolchain set up for your target device. For more info, refer to Step 1 of <a href="https://github.com/contiki-os/contiki/wiki/Setup-contiki-toolchain-in-ubuntu-13.04">the official Contiki documentation</a>.<br />Download the source:<br /><pre>git clone https://github.com/cetic/contiki
cd contiki
git checkout sniffer</pre></p>

	<p>Connect your sniffer device. Build & Upload the application<br /><pre>cd examples/sniffer
make TARGET=your_target sniffer.upload</pre></p>

	<p>For example, with a TMote/Sky, TelosB, CM5000:<br /><pre>make TARGET=sky sniffer.upload</pre></p>

	<p>Note: if you have trouble setting your <span class="caps">USB</span> permissions, you will need to run that last command as root.</p>

	<h2>Selecting the sniffer as input device</h2>

	<p>Time to open Foren6, assuming you have already followed the <a href="install.html">Foren6 Installation Instructions</a><br />Open the 'Manage Sources&#8217; dialog by clicking the Manage Sources button in the Toolbar or from the 'File&#8217; menu.</p>

	<p>In this dialog, remove any existing entries in the top section by selecting each individual element and hitting the 'Remove&#8217; button. If you have followed the previous example, you should see one or more 'pcap&#8217; files which must be removed. Next, add a new source by specifying the three fields as shown below:</p>

	<p><img src="images/userman/manage-sources-sniffer.png" alt="" /></p>

	<ul>
		<li><strong>Target</strong>: type the path to the <span class="caps">USB</span> device (example: /dev/ttyUSB0)</li>
		<li><strong>Channel</strong>: the integer value of the Channel you want to snif (1 to 26)</li>
		<li><strong>Type</strong>: select <strong>snif</strong></li>
	</ul>

	<p>Click the <strong>Add</strong> button when the above information is entered. If the device is found by the application, it will appear in the list of available device. If your device exists but you get an error at this point, is it likely that the user running Foren6 does not have permission to access that serial device. See <a href="#PERMISSIONS">the above instructions</a> to grant user permissions, or launch the foren6 application as root (not recommended).<br />Hit the <strong>Close</strong> button to return to the main window.</p>

	<h2>Starting a Capture</h2>

	<p>Click the <strong>Start</strong> button (which will now be enabled) to launch a packet capture.</p>

	<p><img src="images/userman/start-btn.png" alt="" /></p>

	<p>The timeline should start ticking, and new packets will appear in the Event Window. If the packets are properly formatted, the network visualiser will display the sniffed nodes, and connect them to form a reconstructed <span class="caps">RPL</span> graph based on the sniffed information.</p>

	<p><a href="getting-started.html"><strong>Back to examples index</strong></a></p>
      </section>

      <footer>
        <p>This project is maintained by <a href="http://www.cetic.be">CETIC</a>. Find us on <a href="http://github.com/cetic">GitHub</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme based on <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
  </body>
</html>
